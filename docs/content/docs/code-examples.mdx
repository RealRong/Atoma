---
title: Code Examples
description: 常用场景示例——查询、乐观写、注册表、多适配器
---

## useFindMany（本地 / 远程 / 双轨）

```ts
const query = store.useFindMany({
  where: { status: { in: ['active', 'synced'] } },
  orderBy: [{ field: 'updatedAt', direction: 'desc' }],
  limit: 10,
  fetchPolicy: 'cache-and-network', // 或 'network-only' / 'cache-only'
  skipStore: false                  // 大列表可设 true 仅瞬时查询
})
```

## 乐观写入

```ts
await store.addOne({ title: 'New', createdAt: Date.now(), updatedAt: Date.now() })
// 乐观模式：先写本地，适配器成功后触发 onSuccess，失败自动回滚
```

## StoreRegistry + InMemoryAdapter

```ts
// registryLocalStore.ts 已注册 people / projects
const people = Store('people')
const list = people.useFindMany({ where: { department: 'Engineering' } })
```

## SQLite HTTP 适配器（大列表 demo）

```ts
const BigListStore = createSyncStore({
  name: 'big-items',
  adapter: new SQLiteHttpAdapter({ baseURL: 'http://localhost:8787', resourceName: 'items' }),
  indexes: [{ field: 'createdAt', type: 'number' }, { field: 'title', type: 'text' }]
})
```

## IndexedDB（Dexie）

```ts
const db = new Dexie('atoma-demo')
db.version(1).stores({ todos: 'id, title, updatedAt, createdAt' })

const todoStore = createSyncStore<Todo>({
  name: 'todos',
  adapter: new IndexedDBAdapter(db.table('todos')),
  indexes: [{ field: 'title', type: 'text', options: { minTokenLength: 2 } }]
})
```
