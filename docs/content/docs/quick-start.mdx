---
title: Quick Start
description: 本地跑起 Atoma 示例，体验 useFindMany、IndexedDB、SQLite、大列表与注册表
---

## 环境准备

```bash
npm install          # 安装仓库根依赖
npm install --prefix demo        # 安装 demo 依赖
npm install --prefix atoma-docs  # 安装文档站依赖
```

> 提示：大列表示例需要系统提供 `sqlite3` CLI（macOS 默认内置）。如无，可设置 `START_SQLITE_SERVER=false` 跳过。

## 运行 Demo

```bash
npm run dev --prefix demo
```

默认会启动：
- Vite 前端（http://localhost:5173）
- SQLite 本地 HTTP 服务（http://localhost:8787）

侧边栏可切换三页：
- **IndexedDB Playground**：可编辑 `FindManyOptions`，观察 useFindMany 本地/远程查询与索引。
- **SQLite Big List**：20k 行远端分页 + 多条件筛选，展示大列表下最小样板。
- **Registry Local Filters**：StoreRegistry + InMemoryAdapter，本地过滤零样板，多类型切换。

## 创建你的第一个 Store

```ts
import { createSyncStore, IndexedDBAdapter } from 'atoma'
import Dexie from 'dexie'

type Todo = { id: string; title: string; createdAt: number; updatedAt: number }

const db = new Dexie('atoma-demo')
db.version(1).stores({ todos: 'id, title, updatedAt, createdAt' })

export const todoStore = createSyncStore<Todo>({
  name: 'todos',
  adapter: new IndexedDBAdapter(db.table('todos')),
  indexes: [{ field: 'title', type: 'text', options: { minTokenLength: 2 } }],
  hooks: {
    beforeSave: ({ item }) => {
      const now = Date.now()
      return { ...item, createdAt: item.createdAt ?? now, updatedAt: now }
    },
  },
})
```

在组件中：

```tsx
function TodoList() {
  const { data, loading, error } = todoStore.useFindMany({
    where: { title: { contains: 'react' } },
    orderBy: { field: 'createdAt', direction: 'desc' },
    limit: 20,
  })
  if (loading) return <div>Loading...</div>
  if (error) return <div>Error: {error.message}</div>
  return data.map(t => <div key={t.id}>{t.title}</div>)
}
```

## 查看补丁与历史

在 IndexedDB Playground 中点击 “批量更新” 可看到队列→补丁→历史记录的完整链路（History 面板）。UseFindMany 会根据索引实时筛选，无需手写排序/过滤。 
